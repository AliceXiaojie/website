<!DOCTYPE html>
<html lang="en" style="height:100%">
  <head>
			<meta charset="UTF-8">
			<title>HCIN 720: Javascript Pitfalls and tips</title>
			<script src="/js/jquery-1.11.3.min.js"></script>
			<script src="/js/bootstrap.min.js"></script>
			<script src="/js/bib-list-min.js"></script>
			<link href="/css/bootstrap.min.css" rel="stylesheet" type="text/css">
			<link href="/css/pygments.css" rel="stylesheet" type="text/css">
			<link href="/fonts/fonts.css" rel="stylesheet" type="text/css">
			<link href="/css/style.css" rel="stylesheet" type="text/css">
			<link href="/font-awesome/css/font-awesome.min.css" rel="stylesheet">

<link rel="apple-touch-icon" sizes="57x57" href="/files/720/icons/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/files/720/icons/apple-touch-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/files/720/icons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/files/720/icons/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/files/720/icons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/files/720/icons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/files/720/icons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/files/720/icons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/files/720/icons/apple-touch-icon-180x180.png">
<link rel="icon" type="image/png" href="/files/720/icons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/files/720/icons/favicon-194x194.png" sizes="194x194">
<link rel="icon" type="image/png" href="/files/720/icons/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/files/720/icons/android-chrome-192x192.png" sizes="192x192">
<link rel="icon" type="image/png" href="/files/720/icons/favicon-16x16.png" sizes="16x16">
<link rel="manifest" href="/files/720/icons/manifest.json">
<link rel="shortcut icon" href="/files/720/icons/favicon.ico">
<meta name="msapplication-TileColor" content="#2d89ef">
<meta name="msapplication-TileImage" content="/files/720/icons/mstile-144x144.png">
<meta name="msapplication-config" content="/files/720/icons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">

  </head>

  <body style="height:100%">
    <div class="container" style="height:100%">

<div class="row">
	<div class="col-xs-12">
		<h1 class="sitetitle"><span class="fa fa-cloud"></span>
			<a class="noformat" href="index.html">HCIN
				720: Designing UX for Internet-Enabled Devices</a></h1> </div>
</div>

			<div class="row" style="height:100%">

	<div class="col-xs-3 col-left sidebar">
		<h3>Course Info</h3>
<p><p class="smaller">
    <div class='wrapline'>Tu/Th 2:00-3:15 pm</div>
    <div class='wrapline'>Locations: GOL-3560 and
        <a href="https://goo.gl/maps/4hvRG">ORN-1385</a> (when announced)</div>
    <div class='wrapline'>Office hours: Thu 3:30-5:00 pm,
        <a href="https://goo.gl/maps/4hvRG">ORN-1385</a></div>
    <div class='wrapline'><a href="using_slack.html">Slack</a> for discussion,
    questions, help, and announcements.</div>
</p></p>
<hr>

<h3>Links</h3>
<ul>
<li><span class="fa fa-fw fa-file-o"></span><a href="index.html">Course overview</a></li>
<li><span class="fa fa-fw fa-file-pdf-o"></span><a href="/files/720/syllabus-v2.pdf">Syllabus</a></li>
<li><span class="fa fa-fw fa-calendar"></span><a href="https://www.google.com/calendar/embed?src=fka1qfv64r69a6a72hqk6u3ai4%40group.calendar.google.com&amp;ctz=America/New_York">Class
    calendar</a></li>
<li><span class="fa fa-fw fa-file-o"></span><a href="intro_to_js.html">Intro to
    Javascript</a></li>
</ul>
<hr>

<h3>Readings</h3>
<p><em>Dates refer to when we will discuss the paper in class.</em></p>
<ul>
<li>Thu, Oct 15: <a href="/files/720/The Coming Age of Calm Computing.pdf">The Coming Age of Calm Computing</a>,
    <a href="/files/720/Heuristic Evaluation of Ambient Displays.pdf">Heuristic Evaluation of Ambient Displays</a> </li>
<li>Tue, Sep 15: <a href="http://ieeexplore.ieee.org/xpl/articleDetails.jsp?arnumber=7030240">Enabling the Internet of
    Things</a></li>
<li>Tue, Sep 8: <a href="ieeexplore.ieee.org/xpl/articleDetails.jsp?arnumber=6127852">Informing the design of proxemic
    interactions</a></li>
<li>Tue, Sep 1: <a href="/files/720/Scientific American 1991 Weiser.pdf">The Computer for the 21st
    Century</a></li>
</ul>
<h3>Slides</h3>
<ul>
<li><a href="/files/720/slides/HCIN720-01.pdf">Tue, Aug 25</a></li>
<li><a href="/files/720/slides/HCIN720-02.pdf">Thu, Aug 27</a></li>
<li><a href="/files/720/slides/HCIN720-03.pdf">Tue, Sep 1</a></li>
<li><a href="/files/720/slides/HCIN720-04.pdf">Tue, Sep 8</a></li>
<li><a href="/files/720/slides/HCIN720-05.pdf">Thu, Sep 10</a></li>
<li><a href="class7-electronics.html">Tue, Sep 15</a></li>
<li><a href="/files/720/slides/HCIN720-07.pdf">Tue, Sep 29</a></li>
<li><a href="/files/720/slides/HCIN720-08.pdf">Tue, Oct 6</a></li>
<li><a href="/files/720/slides/HCIN720-09.pdf">Thu, Oct 15</a></li>
<li><a href="/files/720/slides/HCIN720-10.pdf">Tue, Oct 20</a></li>
<li><a href="/files/720/slides/HCIN720-11.pdf">Thu, Oct 22</a></li>
</ul>
	</div>

<div class='col-xs-6 center-content' style='height:100%'>
	<h1>Javascript Pitfalls and tips</h1>
	<h1 id="javascript-pitfalls-and-tips">Javascript Pitfalls and Tips</h1>
<h2 id="type-coercion">Type coercion</h2>
<p>Javascript likes to be helpful. That means it wants to put bugs in
your code for you. One example is automatic type coercion: converting
values, if needed, to other types of objects. There are several
examples:</p>
<h3 id="_1"><code>[]</code></h3>
<p>The <code>[]</code> operator (to access properties of an object) coerces strings:</p>
<div class="highlight"><pre><span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="s1">&#39;how&#39;</span><span class="p">,</span> <span class="s1">&#39;are&#39;</span><span class="p">,</span> <span class="s1">&#39;you&#39;</span><span class="p">]</span>
<span class="o">&gt;</span> <span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="nx">hello</span>
<span class="o">&gt;</span> <span class="nx">a</span><span class="p">[</span><span class="s1">&#39;0&#39;</span><span class="p">]</span>
<span class="nx">hello</span>
</pre></div>


<h3 id="_2"><code>+</code></h3>
<p>The <code>+</code> operator can add two numbers or concatenate two strings. It
depends on the types of the objects:</p>
<div class="highlight"><pre><span class="o">&gt;</span> <span class="mi">5</span> <span class="o">+</span> <span class="mi">6</span>
<span class="mi">11</span>
<span class="o">&gt;</span> <span class="s1">&#39;5&#39;</span> <span class="o">+</span> <span class="s1">&#39;6&#39;</span>
<span class="s1">&#39;56&#39;</span>
<span class="o">&gt;</span> <span class="mi">5</span> <span class="o">+</span> <span class="s1">&#39;6&#39;</span>
<span class="s1">&#39;56&#39;</span>
</pre></div>


<h3 id="equality">Equality</h3>
<p>Javascript has two kinds of equality operators: <code>==</code> and <code>===</code>. The
first kind, <code>==</code>, does some really weird stuff related to coercion, so
it&#8217;s best to avoid it entirely. Always use <code>===</code> and, for testing
non-equality, <code>!==</code> (rather than <code>!=</code>). Read on for more details of
why this is good advice.</p>
<p>The <code>==</code> operator is bad because it coerces the values on either
side if they are of different types. For example, it might try to
interpret a string as an integer:</p>
<div class="highlight"><pre><span class="o">&gt;</span> <span class="mi">0</span> <span class="o">==</span> <span class="s1">&#39;0&#39;</span>
<span class="kc">true</span>
</pre></div>


<p>The <code>===</code> operator leaves the types alone:</p>
<div class="highlight"><pre><span class="o">&gt;</span> <span class="mi">0</span> <span class="o">===</span> <span class="s1">&#39;0&#39;</span>
<span class="kc">false</span>
</pre></div>


<h2 id="var"><code>var</code></h2>
<p><code>var</code> defines the private variables for a function. For example, put
this into the left-hand window of your <a href="http://repl.it">repl.it</a>
editor, then click the Run button:</p>
<div class="highlight"><pre><span class="nx">x</span> <span class="o">=</span> <span class="s2">&quot;hello&quot;</span><span class="p">;</span>
<span class="nx">y</span> <span class="o">=</span> <span class="s2">&quot;goodbye&quot;</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">testA</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">j</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">j</span><span class="p">;</span>
    <span class="nx">y</span> <span class="o">=</span> <span class="nx">j</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;hello, x is &quot;</span><span class="p">,</span> <span class="nx">x</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;hello, y is &quot;</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">testB</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;hi, x is &quot;</span><span class="p">,</span> <span class="nx">x</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;hi, y is &quot;</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>


<p>Now, in the right-hand console, run the two functions and think about
the results:</p>
<div class="highlight"><pre><span class="o">&gt;</span> <span class="nx">testA</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="nx">hello</span><span class="p">,</span> <span class="nx">x</span> <span class="nx">is</span>  <span class="mi">5</span>
<span class="nx">hello</span><span class="p">,</span> <span class="nx">y</span> <span class="nx">is</span>  <span class="mi">5</span>
<span class="o">&gt;</span> <span class="nx">testB</span><span class="p">()</span>
<span class="nx">hi</span><span class="p">,</span> <span class="nx">x</span> <span class="nx">is</span>  <span class="nx">hello</span>
<span class="nx">hi</span><span class="p">,</span> <span class="nx">y</span> <span class="nx">is</span>  <span class="mi">5</span>
</pre></div>


<p>What happened? Because they were declared outside of a function
definition, <code>x</code> and <code>y</code> are global variables. But when we use <code>var x</code>
inside of <code>testA</code>, <code>x</code> is a local variable for <code>testA</code>.</p>
<p>The lesson is to always declare all of your variables at the top of
the function.</p>
<h2 id="nan"><code>NaN</code></h2>
<p><code>NaN</code> (<strong>N</strong>ot <strong>a</strong> <strong>N</strong>umber) is a value that results from some invalid
computation. For example:</p>
<div class="highlight"><pre><span class="o">&gt;</span> <span class="mi">0</span><span class="o">/</span><span class="mi">0</span>
<span class="kc">NaN</span>
</pre></div>


<p><code>NaN</code> is not equal to anything else, <em>including itself</em>:</p>
<div class="highlight"><pre><span class="o">&gt;</span> <span class="kc">NaN</span> <span class="o">===</span> <span class="kc">NaN</span>
<span class="kc">false</span>
<span class="o">&gt;</span> <span class="kc">NaN</span> <span class="o">!==</span> <span class="kc">NaN</span>
<span class="kc">true</span>
</pre></div>


<p>You can check if something is <code>Nan</code> with <code>isNan()</code>:</p>
<div class="highlight"><pre><span class="o">&gt;</span> <span class="nx">x</span> <span class="o">=</span> <span class="kc">NaN</span>
<span class="o">&gt;</span> <span class="nx">isNan</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span>
<span class="kc">true</span>
</pre></div>


<h2 id="truth-and-falseness">Truth and falseness</h2>
<p>All values evaluate to <code>true</code> except for a few &#8220;falsy&#8221; ones. These
are:</p>
<ul>
<li><code>false</code></li>
<li><code>null</code></li>
<li><code>undefined</code></li>
<li><code>''</code> (the empty string)</li>
<li><code>0</code> (the number zero)</li>
<li><code>NaN</code></li>
</ul>
<h2 id="decimals">Decimals</h2>
<p>Fractional numbers can act funny:</p>
<div class="highlight"><pre><span class="o">&gt;</span> <span class="p">.</span><span class="mi">1</span> <span class="o">+</span> <span class="p">.</span><span class="mi">2</span>
<span class="mf">0.30000000000000004</span>
<span class="o">&gt;</span> <span class="p">.</span><span class="mi">1</span> <span class="o">+</span> <span class="p">.</span><span class="mi">2</span> <span class="o">===</span> <span class="p">.</span><span class="mi">3</span>
<span class="kc">false</span>
</pre></div>


<h2 id="default-values">Default values</h2>
<p>You can use the <em>logical or</em> (<code>||</code>) operator to get default values out
of objects.  This works because Javascript returns <code>undefined</code> when
you ask for a property that doesn&#8217;t exist, and because <code>undefined</code> is
a &#8220;falsy&#8221; value. Therefore:</p>
<div class="highlight"><pre><span class="o">&gt;</span> <span class="mi">3</span> <span class="o">||</span> <span class="kc">undefined</span>
<span class="mi">3</span>
<span class="o">&gt;</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="mi">3</span>
<span class="mi">3</span>
</pre></div>


<p>We can use this to get default values:</p>
<div class="highlight"><pre><span class="o">&gt;</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span><span class="nx">size</span><span class="o">:</span> <span class="s1">&#39;small&#39;</span><span class="p">,</span> <span class="nx">color</span><span class="o">:</span> <span class="s1">&#39;blue&#39;</span><span class="p">}</span>
<span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">size</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">size</span> <span class="o">||</span> <span class="s1">&#39;medium&#39;</span>
<span class="o">&gt;</span> <span class="nx">size</span>
<span class="s1">&#39;small&#39;</span>
<span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">material</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">material</span> <span class="o">||</span> <span class="s1">&#39;metal&#39;</span>
<span class="o">&gt;</span> <span class="nx">material</span>
<span class="s1">&#39;metal&#39;</span>
</pre></div>
</div>
<div class='col-xs-3 col-right sidebar'>
	<h3>Important dates</h3>
<table>
<thead>
<tr>
<th>Date</th>
<th>Event</th>
</tr>
</thead>
<tbody>
<tr>
<td>Aug 25</td>
<td>Class starts</td>
</tr>
<tr>
<td>Sep 3</td>
<td>Class in ORN-1385</td>
</tr>
<tr>
<td>Oct 13</td>
<td>Classes on Monday schedule</td>
</tr>
<tr>
<td>Nov 10</td>
<td>Dr. Ashbrook at <a href="http://acm.org/uist">UIST</a></td>
</tr>
<tr>
<td></td>
<td>No class: work day</td>
</tr>
<tr>
<td>Nov 12</td>
<td>Guest lecture</td>
</tr>
</tbody>
</table>
<hr>

<h3>Assignments</h3>
<p><em>All assignments are due at 1:59 pm on the due date.</em></p>
<table>
<thead>
<tr>
<th>Assigned</th>
<th>Due</th>
<th>Link</th>
</tr>
</thead>
<tbody>
<tr>
<td>Tue, Aug 25</td>
<td>Wed, Aug 26</td>
<td><a href="https://docs.google.com/forms/d/1TG3gzmcLktQi2kpWAWmJ77d5N1KAboQTLbTK-IGLj_4/viewform">Survey</a></td>
</tr>
<tr>
<td>Tue, Aug 25</td>
<td>Thu, Aug 27</td>
<td><a href="a1setup.html">IA 1 Set up</a></td>
</tr>
<tr>
<td>Thu, Aug 27</td>
<td>Tue, Sep 8</td>
<td><a href="assignment1.html">IA 1</a></td>
</tr>
<tr>
<td>Tue, Sep 8</td>
<td>Thu, Sep 10</td>
<td><a href="a2setup.html">IA 2 Set up</a></td>
</tr>
<tr>
<td>Tue, Sep 10</td>
<td>Tue, Sep 22</td>
<td><a href="assignment2.html">IA 2</a></td>
</tr>
<tr>
<td>Tue, Sep 29</td>
<td>Thu, Oct 15</td>
<td><a href="assignment3.html">IA 3</a></td>
</tr>
<tr>
<td>Thu, Oct 1</td>
<td>Thu, Oct 8</td>
<td><a href="extracredit1.html">EC 1</a></td>
</tr>
<tr>
<td>Thu, Oct 15</td>
<td>Thu, Nov 11</td>
<td><a href="group_project1.html">GP 1</a></td>
</tr>
<tr>
<td>Thu, Oct 15</td>
<td>Thu, Nov 11</td>
<td><a href="group_project1.html#extracredit2">EC 2</a></td>
</tr>
<tr>
<td>Thu, Nov 5</td>
<td>Thu, Nov 11</td>
<td>FP prop.</td>
</tr>
<tr>
<td>Thu, Nov 11</td>
<td>Tue, Dec 8</td>
<td>FP demo</td>
</tr>
<tr>
<td>Thu, Nov 11</td>
<td>Tue, Dec 15</td>
<td>FP writeup</td>
</tr>
</tbody>
</table>
<p><em>(IA: Individual Assignment; GP: Group Project; EC: Extra Credit; FP:
Final Project; prop.: proposal)</em></p>
</div>

      </div>
    </div>
  </body>
</html>